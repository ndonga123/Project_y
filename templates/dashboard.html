{% extends 'layout.html' %}
{% block content %}
<div class="dashboard-wrapper">

  <div class="header-row mb-4">
    <div>
      <h3 class="page-title">Welcome to <span class="brand">Lyncrest Medical Center</span></h3>
      <p class="text-muted small">Simple, secure patient management.</p>
    </div>
    <div class="d-flex align-items-center">
      <!-- optional small logo preview -->
      <img src="{{ url_for('static', filename='logo.png') }}" alt="Lyncrest" class="dashboard-logo">
    </div>
  </div>

  <!-- stat cards -->
  <div class="row g-4">
    <div class="col-md-3">
      <div class="stat-card">
        <small class="muted">Total Patients</small>
        <div class="stat-number text-primary">{{ total_patients }}</div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="stat-card">
        <small class="muted">Appointments</small>
        <div class="stat-number text-success">{{ total_appointments }}</div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="stat-card">
        <small class="muted">Unpaid Bills</small>
        <div class="stat-number text-danger">{{ unpaid_bills }}</div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="stat-card">
        <small class="muted">Billing (Ksh)</small>
        <div class="stat-number text-primary">Ksh {{ total_billing }}</div>
      </div>
    </div>
  </div>

  <div class="row mt-4 g-4">
    <!-- Logo & description card -->
    <div class="col-lg-7">
      <div class="card p-4 brand-card">
        <div class="d-flex align-items-center">
          <img src="{{ url_for('static', filename='logo.png') }}" alt="Lyncrest logo" class="brand-large me-4">
          <div>
            <h4 class="mb-1">Lyncrest Medical Center</h4>
            <p class="text-muted mb-0">Delivering trusted healthcare. View patients, schedule appointments, and manage billing — all in one place.</p>
          </div>
        </div>
      </div>

      <!-- optional recent items -->
      <div class="row g-3 mt-3">
        <div class="col-md-6">
          <div class="card p-3">
            <h6>Recent Appointments</h6>
            <ul class="list-group list-group-flush">
              {% if latest_appointments %}
                {% for a in latest_appointments %}
                  <li class="list-group-item small">{{ a.date }} {{ a.time }} — {{ a.doctor }} ({{ a.patient_name }})</li>
                {% endfor %}
              {% else %}
                <li class="list-group-item small text-muted">No recent appointments</li>
              {% endif %}
            </ul>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card p-3">
            <h6>Recent Payments</h6>
            <ul class="list-group list-group-flush">
              {% if latest_bills %}
                {% for b in latest_bills %}
                  <li class="list-group-item small">{{ b.date }} — Ksh {{ b.amount }} — {{ b.status }}</li>
                {% endfor %}
              {% else %}
                <li class="list-group-item small text-muted">No recent payments</li>
              {% endif %}
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Notifications -->
    <div class="col-lg-5">
      <div class="card p-3">
        <h6>Notifications</h6>
        {% if notifications %}
          <ul class="list-unstyled mb-0">
            {% for note in notifications %}
              <li class="py-2 border-bottom small"><strong>{{ note.message }}</strong><div class="text-muted small">{{ note.time }}</div></li>
            {% endfor %}
          </ul>
        {% else %}
          <p class="small text-muted mb-0">No new notifications.</p>
        {% endif %}
      </div>
    </div>
  </div>

</div>
{% endblock %}
