{% extends 'layout.html' %}
{% block content %}
<style>
    /* Sticky top-right buttons */
    .top-buttons {
        position: sticky;
        top: 1rem; /* distance from top */
        z-index: 1000;
    }
</style>

<div class="dashboard-wrapper">

  <!-- Header row with top-right buttons -->
  <div class="header-row mb-4 d-flex justify-content-between align-items-center position-relative">
    <div>
      <h3 class="page-title">Welcome to <span class="brand">Lyncrest Medical Center</span></h3>
      <p class="text-muted small">Simple, secure patient management.</p>
    </div>
    <div class="d-flex align-items-center top-buttons">
      <img src="{{ url_for('static', filename='logo.png') }}" alt="Lyncrest" class="dashboard-logo me-3">
      <div>
        <a href="{{ url_for('patients') }}" class="btn btn-outline-primary btn-sm me-1">
          <i class="bi bi-person-plus"></i> Patients
        </a>
        <a href="{{ url_for('appointments') }}" class="btn btn-outline-success btn-sm me-1">
          <i class="bi bi-calendar"></i> Appointments
        </a>
        <a href="{{ url_for('billing') }}" class="btn btn-outline-info btn-sm">
          <i class="bi bi-cash-stack"></i> Billing
        </a>
      </div>
    </div>
  </div>

  <!-- stat cards -->
  <div class="row g-4">
    <div class="col-md-3">
      <div class="stat-card">
        <small class="muted">Total Patients</small>
        <div class="stat-number text-primary">{{ total_patients }}</div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="stat-card">
        <small class="muted">Appointments</small>
        <div class="stat-number text-success">{{ total_appointments }}</div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="stat-card">
        <small class="muted">Unpaid Bills</small>
        <div class="stat-number text-danger">{{ unpaid_bills }}</div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="stat-card">
        <small class="muted">Billing (Ksh)</small>
        <div class="stat-number text-primary">Ksh {{ total_billing }}</div>
      </div>
    </div>
  </div>

  <div class="row mt-4 g-4">
    <!-- Logo & description card -->
    <div class="col-lg-7">
      <div class="card p-4 brand-card">
        <div class="d-flex align-items-center">
          <img src="{{ url_for('static', filename='logo.png') }}" alt="Lyncrest logo" class="brand-large me-4">
          <div>
            <h4 class="mb-1">Lyncrest Medical Center</h4>
            <p class="text-muted mb-0">Delivering trusted healthcare. View patients, schedule appointments, and manage billing â€” all in one place.</p>
          </div>
        </div>
      </div>

    <!-- Notifications -->
    <div class="col-lg-5">
      <div class="card p-3">
        <h6>Notifications</h6>
        {% if notifications %}
          <ul class="list-unstyled mb-0">
            {% for note in notifications %}
              <li class="py-2 border-bottom small"><strong>{{ note.message }}</strong><div class="text-muted small">{{ note.time }}</div></li>
            {% endfor %}
          </ul>
        {% else %}
          <p class="small text-muted mb-0">No new notifications.</p>
        {% endif %}
      </div>
    </div>
  </div>

</div>
{% endblock %}
